(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,a,t){e.exports=t(181)},181:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(23),c=t.n(r),s=t(120),o=(t(58),t(34)),m=t(40),i=t(54),u=t(182),d=t(183),E=t(184),h=t(196),p=t(185),v=t(186),k=t(187),f=t(188),g=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),r=t[0],c=t[1];return l.a.createElement("div",null,l.a.createElement(u.a,{color:"light",light:!0,expand:"md"},l.a.createElement(d.a,{href:"/"},"Task Management"),l.a.createElement(E.a,{onClick:function(){return c(!r)}}),l.a.createElement(h.a,{isOpen:r,navbar:!0},l.a.createElement(p.a,{className:"mr-auto",navbar:!0},localStorage.getItem("authToken")?l.a.createElement(n.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/"},"Home")),l.a.createElement(f.a,{variant:"outline-success",onClick:function(){localStorage.clear(),e.history.push("/")}},"logout")):l.a.createElement(n.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/"},"Home")),l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/register"},"Register")),l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/login"},"Login")))))))},b=t(6);var y=Object(b.b)((function(e){return{count:e.count}}))((function(e){return l.a.createElement("div",null,l.a.createElement("h4",null,"Count - ",e.count),l.a.createElement("button",{onClick:function(){e.dispatch({type:"INCREMENT"})}},"Click"))}));var T=function(e){return l.a.createElement("div",null,l.a.createElement(g,e),l.a.createElement("h1",null,"Task Management Application"))},w=t(77),N=t(29),S=t(115),O=t.n(S).a.create({baseURL:"https://kp-app.herokuapp.com"}),C=t(189),j=t(190),_=t(191),V=t(192);var x=Object(b.b)()((function(e){return console.log("register - ",e),l.a.createElement("div",null,l.a.createElement(g,e),l.a.createElement("div",{className:"container-fluid p-0"},l.a.createElement("div",{className:"background_img"},l.a.createElement("div",{className:"layer"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"offset-8 col-md-4"},l.a.createElement("div",{className:"register_background"},l.a.createElement(w.a,{initialValues:{username:"",email:"",password:""},validationSchema:N.a().shape({username:N.b().required("Username is required"),email:N.b().email("email is invalid").required("email is required"),password:N.b().required("Password is required")}),onSubmit:function(a){O.post("/users/register",a).then((function(a){var t=a.data,n=t.user;t.errors;n?e.history.push("/login"):alert("Error")})).catch((function(e){console.log(e)}))}},(function(e){var a=e.values,t=e.errors,n=e.touched,r=e.handleChange,c=e.handleBlur,s=e.handleSubmit;return l.a.createElement(C.a,{onSubmit:s},l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"username"},"Username"),l.a.createElement(V.a,{type:"text",id:"username",name:"username",onChange:r,onBlur:c,value:a.username}),l.a.createElement("div",{className:"errors"},t.username&&n.username&&t.username)),l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"email"},"Email"),l.a.createElement(V.a,{type:"email",id:"email",name:"email",onChange:r,onBlur:c,value:a.email}),l.a.createElement("div",{className:"errors"},t.email&&n.email&&t.email)),l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"password"},"Password"),l.a.createElement(V.a,{type:"password",id:"password",name:"password",onChange:r,onBlur:c,value:a.password}),l.a.createElement("div",{className:"errors"},t.password&&n.password&&t.password)),l.a.createElement(f.a,{type:"submit"},"Submit"))}))))))))))}));var A=Object(b.b)()((function(e){return console.log("Login - ",e),l.a.createElement("div",null,l.a.createElement(g,e),l.a.createElement("div",{className:"container-fluid p-0"},l.a.createElement("div",{className:"background_img"},l.a.createElement("div",{className:"layer"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"offset-8 col-md-4"},l.a.createElement("div",{className:"login_background"},l.a.createElement(w.a,{initialValues:{email:"",password:""},validationSchema:N.a().shape({email:N.b().email("email is invalid").required("email is required"),password:N.b().required("Password is required")}),onSubmit:function(a){O.post("/users/login",a).then((function(a){if(a.data.token){var t=a.data,n=t.token,l=t.user;localStorage.setItem("authToken",n),"admin"==l.role?e.history.push("/admin"):e.history.push("/employee")}})).catch((function(e){console.log(e)}))}},(function(e){var a=e.values,t=e.errors,n=e.touched,r=e.handleChange,c=e.handleBlur,s=e.handleSubmit;return l.a.createElement(C.a,{onSubmit:s},l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"email"},"Email"),l.a.createElement(V.a,{type:"email",id:"email",name:"email",onChange:r,onBlur:c,value:a.email}),l.a.createElement("div",{className:"errors"},t.email&&n.email&&t.email)),l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"password"},"Password"),l.a.createElement(V.a,{type:"password",id:"password",name:"password",onChange:r,onBlur:c,value:a.password}),l.a.createElement("div",{className:"errors"},t.password&&n.password&&t.password)),l.a.createElement(f.a,{type:"submit"},"Submit"))}))))))))))})),B=t(193),I=function(){return function(e){O.get("/users/account",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var t=a.data;e({type:"SET_ACCOUNT",payload:t})})).catch((function(e){console.log(e)}))}},D=Object(b.b)((function(e){return{account:e.account}}))((function(e){e.dispatch(I());var a=Object(n.useState)(!1),t=Object(i.a)(a,2),r=t[0],c=t[1];return l.a.createElement("div",null,l.a.createElement(u.a,{color:"light",light:!0,expand:"md"},l.a.createElement(d.a,{href:"/"},"Task Management"),l.a.createElement(E.a,{onClick:function(){return c(!r)}}),l.a.createElement(h.a,{isOpen:r,navbar:!0},l.a.createElement(p.a,{className:"mr-auto",navbar:!0},l.a.createElement(n.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/admin"},"Home")),l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/task"},"Tasks")),l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/task/create"},"Post Tasks")),l.a.createElement(f.a,{variant:"outline-success",onClick:function(){localStorage.clear(),e.history.push("/")}},"logout"))),l.a.createElement(B.a,null,e.account&&e.account.username))))})),P=t(14),q=t.n(P),M=function(e){return{type:"UPDATE_TASK",payload:e}},F=function(){return function(e){O.get("/tasks/list",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var t=a.data;e({type:"GET_TASKS",payload:t})})).catch((function(e){console.log(e)}))}},U=function(){return function(e){O.get("/users/list",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var t=a.data;e({type:"GET_USER",payload:t})})).catch((function(e){console.log(e)}))}},K=t(194);var R=Object(b.b)((function(e){return{user:e.user,task:e.task}}))((function(e){return e.dispatch(U()),0==e.task.length&&e.dispatch(F()),l.a.createElement("div",null,l.a.createElement(D,e),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Total Employees"),l.a.createElement("h5",null,q()(e.user)?l.a.createElement(K.a,{color:"success"}):e.user.length))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Total Tasks"),l.a.createElement("h5",null,q()(e.task)?l.a.createElement(K.a,{color:"success"}):e.task.length))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Active Tasks"),l.a.createElement("h5",null,q()(e.task)?l.a.createElement(K.a,{color:"success"}):e.task.filter((function(e){return 1==e.status})).length))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Completed Tasks"),l.a.createElement("h5",null,q()(e.task)?l.a.createElement(K.a,{color:"success"}):e.task.filter((function(e){return 0==e.status})).length)))),l.a.createElement("div",null,!q()(e.user)&&l.a.createElement("div",null,e.user.map((function(e){return l.a.createElement("h3",{key:e._id},e.username)}))))))})),H=t(75),G=t(76),L=t(78),J=t(80),W=function(e){Object(J.a)(t,e);var a=Object(L.a)(t);function t(e){var n;return Object(H.a)(this,t),(n=a.call(this)).state={total:[],active:[],completed:[]},n}return Object(G.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(U()),0==this.props.task.length&&this.props.dispatch(F()),console.log("task props - ",this.props.task)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(D,this.props),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Total Employees"),l.a.createElement("h5",null," ",q()(this.props.user)?l.a.createElement(K.a,{color:"success"}):this.props.user.length))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"admin_cards"},l.a.createElement("h3",null,"Total Employees"),l.a.createElement("h5",null," ",q()(this.state.task)?l.a.createElement(K.a,{color:"success"}):this.state.task.length))),l.a.createElement("div",{className:"col-md-6"},!q()(this.props.user)&&l.a.createElement("div",null,this.props.user.map((function(e){return l.a.createElement("h3",{key:e._id},e.username)})))))))}}]),t}(l.a.Component),z=(Object(b.b)((function(e){return{user:e.user,task:e.task}}))(W),t(195));var Q=function(e){return console.log("table - ",e),l.a.createElement("div",null,l.a.createElement(z.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"View"),l.a.createElement("th",null,"Total Employess"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",null,e.data.map((function(e,a){return l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,a+1),l.a.createElement("td",null,e.taskTitle),l.a.createElement("td",null,l.a.createElement(o.b,{to:"/task/".concat(e._id)},"View")),l.a.createElement("td",null,e.employees.length),l.a.createElement("td",null,e.status?"In Progess":"Completed"))})))))};var X=Object(b.b)((function(e){return{task:e.task}}))((function(e){return console.log("task - ",e),l.a.createElement("div",null,l.a.createElement(D,e),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"offset-2 col-md-8"},l.a.createElement(Q,{data:e.task}),l.a.createElement(o.b,{to:"/task/create"},"Create Task")))))})),Y=Object(b.b)((function(e){return{account:e.account}}))((function(e){e.dispatch(I()),console.log("header - ",e);var a=Object(n.useState)(!1),t=Object(i.a)(a,2),r=t[0],c=t[1];return l.a.createElement("div",null,l.a.createElement(u.a,{color:"light",light:!0,expand:"md"},l.a.createElement(d.a,{href:"/"},"Task Management"),l.a.createElement(E.a,{onClick:function(){return c(!r)}}),l.a.createElement(h.a,{isOpen:r,navbar:!0},l.a.createElement(p.a,{className:"mr-auto",navbar:!0},l.a.createElement(n.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(k.a,{href:"/employee"},"Home")),l.a.createElement(f.a,{variant:"outline-success",onClick:function(){localStorage.clear(),e.history.push("/")}},"logout"))),l.a.createElement(B.a,null,e.account&&e.account.username))))})),Z=function(e,a){return e.filter((function(e){return e._id==a}))};var $=Object(b.b)((function(e,a){var t=a.match.params.id;return{taskView:Z(e.task,t),account:e.account}}))((function(e){return console.log("task - ",e),e.dispatch(F()),0==Object.keys(e.account).length&&e.dispatch(I()),l.a.createElement("div",null,"admin"==e.account.role?l.a.createElement(D,e):l.a.createElement(Y,e),!q()(e.taskView)&&l.a.createElement("div",null,l.a.createElement("h1",null,"Title : ",e.taskView[0].taskTitle),l.a.createElement("p",null,l.a.createElement("b",null,"Description : "),e.taskView[0].taskBody),l.a.createElement("h4",null,e.taskView[0].status?"In Progress":"Completed"),l.a.createElement("h3",null,"Employess Working this project"),l.a.createElement("ul",null,e.taskView[0].employees.map((function(e){return l.a.createElement("li",{key:e.employee._id},e.employee.username)}))),l.a.createElement("p",null,e.taskView[0].priority),"employee"==e.account.role?e.taskView[0].status&&l.a.createElement("button",{onClick:function(){var a;a=e.taskView[0]._id,O.put("/tasks/".concat(a),{status:!1},{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){e.dispatch(M(a.data))})).catch((function(e){console.log(e)}))}},"Finish"):""))})),ee=t(117),ae=t(119),te=function(e){Object(J.a)(t,e);var a=Object(L.a)(t);function t(e){var n;return Object(H.a)(this,t),(n=a.call(this)).handleChange=function(e){n.setState(Object(ee.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var a=n.state,t=a.taskTitle,l=a.taskBody,r=a.employees,c=a.priority,s={taskTitle:t,taskBody:l,employees:r&&r.map((function(e){return{employee:e.value}})),priority:c};O.post("/tasks/create",s,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){var a=e.data,t=a.errors,l=a.tasks;l?(n.props.dispatch({type:"ADD_TASK",payload:l}),n.props.history.push("/task")):t&&alert("fill all the details")})).catch((function(e){console.log(e)}))},n.handleSelect=function(e){n.setState({employees:e})},n.state={taskTitle:"",taskBody:"",employees:"",priorityArr:["High","Medium","Low"],priority:""},n}return Object(G.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(D,this.props),l.a.createElement("h1",{className:"text-center"},"Create Task"),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-background"},l.a.createElement(C.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a,null,l.a.createElement(_.a,{htmlFor:"taskTitle"},"Task Title"),l.a.createElement(V.a,{type:"text",name:"taskTitle",id:"taskTitle",value:this.state.taskTitle,placeholder:"Task Title",onChange:this.handleChange})),l.a.createElement(j.a,null,l.a.createElement(_.a,{for:"taskBody"},"Task Description"),l.a.createElement(V.a,{type:"textarea",name:"taskBody",id:"taskBody",value:this.state.taskBody,placeholder:"Task Description",onChange:this.handleChange})),l.a.createElement(j.a,null,l.a.createElement(_.a,{htmlFor:"employees"},"Assign Task"),l.a.createElement(ae.a,{options:this.props.user.map((function(e){return{value:e._id,label:e.username}})),onChange:this.handleSelect,isMulti:!0,closeMenuOnSelect:!1,placeholder:"Choose Categories"})),l.a.createElement(j.a,{check:!0},l.a.createElement(_.a,{htmlFor:"employees"},"Task Priority"),this.state.priorityArr.map((function(a,t){return l.a.createElement("div",{key:t},l.a.createElement(V.a,{type:"radio",name:"priority",value:a,onChange:e.handleChange,checked:e.state.priority==a}),a)}))),l.a.createElement(j.a,null,l.a.createElement(V.a,{type:"submit",value:"Submit"}))))),l.a.createElement("div",{className:"col-md-3"}))))}}]),t}(l.a.Component),ne=Object(b.b)((function(e){return{user:e.user}}))(te);var le=function(e){return console.log("table - ",e),l.a.createElement(z.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"View"),l.a.createElement("th",null,"Total Employess"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",null,e.data.map((function(e,a){return l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,a+1),l.a.createElement("td",null,e.taskTitle),l.a.createElement("td",null,l.a.createElement(o.b,{to:"/task/".concat(e._id)},"View")),l.a.createElement("td",null,e.employees.length),l.a.createElement("td",null,e.status?"In Progess":"Completed"))}))))};var re=Object(b.b)((function(e){return{task:e.task}}))((function(e){return console.log("employee - ",e),0==e.task.length&&e.dispatch(F()),l.a.createElement("div",null,l.a.createElement(Y,e),e.task&&l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"offset-2 col-md-8"},l.a.createElement(le,{data:e.task})))))}));Object(b.b)((function(e,a){var t=a.match.params.id;return{taskView:Z(e.task,t),account:e.account}}))((function(e){return console.log("task - ",e),l.a.createElement("div",null,l.a.createElement(Y,null),!q()(e.taskView)&&l.a.createElement("div",null,l.a.createElement("h1",null,"Title : ",e.taskView[0].taskTitle),l.a.createElement("p",null,l.a.createElement("b",null,"Description : "),e.taskView[0].taskBody),l.a.createElement("h4",null,e.taskView[0].status?"In Progress":"Completed"),l.a.createElement("h3",null,"Employess Working this project"),l.a.createElement("ul",null,e.taskView[0].employees.map((function(e){return l.a.createElement("li",{key:e.employee._id},e.employee.username)}))),l.a.createElement("p",null,e.taskView[0].priority),e.taskView[0].status&&l.a.createElement("button",{onClick:function(){var a;a=e.taskView[0]._id,O.put("/tasks/".concat(a),{status:!1},{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){e.dispatch(M(a.data))})).catch((function(e){console.log(e)}))}},"Finish")))}));var ce=function(e){var a=localStorage.getItem("authToken"),t=e.component,n=Object(s.a)(e,["component"]);return a?l.a.createElement(m.b,Object.assign({},n,{render:function(e){return l.a.createElement(t,e)}})):l.a.createElement(m.a,{to:"/login"})},se=function(){return l.a.createElement("div",null,l.a.createElement(o.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",component:T,exact:!0}),l.a.createElement(m.b,{path:"/count",component:y}),l.a.createElement(m.b,{path:"/register",component:x}),l.a.createElement(m.b,{path:"/login",component:A}),l.a.createElement(ce,{path:"/admin",component:R}),l.a.createElement(ce,{path:"/task",component:X,exact:!0}),l.a.createElement(ce,{path:"/task/create",component:ne}),l.a.createElement(ce,{path:"/task/:id",component:$,exact:!0}),l.a.createElement(ce,{path:"/employee",component:re,exact:!0}))))},oe=(t(180),t(56)),me=t(118),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INCREMENT":return Number(e)+1;default:return e}},ue={},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ACCOUNT":return a.payload;default:return e}},Ee=t(43),he=[],pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_TASKS":return Object(Ee.a)(a.payload);case"ADD_TASK":return[].concat(Object(Ee.a)(e),[a.payload]);case"UPDATE_TASK":return e.map((function(e){return e._id==a.payload._id?a.payload:e}));default:return Object(Ee.a)(e)}},ve=[],ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_USER":return Object(Ee.a)(a.payload);default:return Object(Ee.a)(e)}},fe=function(){return Object(oe.d)(Object(oe.c)({count:ie,account:de,task:pe,user:ke}),Object(oe.a)(me.a))}();fe.subscribe((function(){console.log(fe.getState())})),fe.dispatch(I()),fe.dispatch(F()),fe.dispatch(U());var ge=l.a.createElement(b.a,{store:fe},l.a.createElement(se,null));c.a.render(ge,document.getElementById("root"))},58:function(e,a,t){}},[[121,1,2]]]);
//# sourceMappingURL=main.5c552c83.chunk.js.map